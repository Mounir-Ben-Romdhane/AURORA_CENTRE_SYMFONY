{% extends 'baseBack.html.twig' %}

{% block title %}Liste des Reclamation !{% endblock %}

{% block stylesheets %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Favicons -->

  <link href="{{asset('/assets/img/favicon.png')}}" rel="icon">
  <link href="{{asset('/assets/img/apple-touch-icon.png')}}" rel="apple-touch-icon">
  

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->

  <link href="{{asset('/vendor/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
  <link href="{{asset('vendor/bootstrap-icons/bootstrap-icons.css')}}" rel="stylesheet">
  <link href="{{asset('/vendor/boxicons/css/boxicons.min.css')}}" rel="stylesheet">
  <link href="{{asset('/vendor/quill/quill.snow.css')}}" rel="stylesheet">
  <link href="{{asset('/vendor/quill/quill.bubble.css')}}" rel="stylesheet">
  <link href="{{asset('/vendor/remixicon/remixicon.css')}}" rel="stylesheet">
  <link href="{{asset('/vendor/simple-datatables/style.css')}}" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="{{asset('/css/styleBack.css')}}" rel="stylesheet">

  <link href="{{asset('/css/bootstrap.min.css')}}" rel="stylesheet">
  

  <link href="{{asset('/css/datatables.min.css')}}" rel="stylesheet">

  <link href="{{asset('/css/style.css')}}" rel="stylesheet">

{% endblock %}

{% block javascripts %}
  <!-- Vendor JS Files -->

  <script src="{{asset('/js/bootstrap.bundle.min.js')}}"></script>
  <script src="{{asset('/js/jquery-3.6.0.min.js')}}"></script>
  <script src="{{asset('/js/datatables.min.js')}}"></script>
  <script src="{{asset('/js/pdfmake.min.js')}}"></script>
  <script src="{{asset('/js/vfs_fonts.min.js')}}"></script>
  <script src="{{asset('/js/custom.js')}}"></script>

{% endblock %}

{% block body %}
<style>
.search-box{
  width: fit-content;
  height: fit-content;
  position: relative;
}
.input-search{
  height: 50px;
  width: 50px;
  border-style: none;
  padding: 10px;
  font-size: 18px;
  letter-spacing: 2px;
  outline: none;
  border-radius: 25px;
  transition: all .5s ease-in-out;
  background-color: #1E90FF;
  padding-right: 40px;
  color:#fff;
}
.input-search::placeholder{
  color:rgba(255,255,255,.5);
  font-size: 18px;
  letter-spacing: 2px;
  font-weight: 100;
}
.btn-search{
  width: 50px;
  height: 50px;
  border-style: none;
  font-size: 20px;
  font-weight: bold;
  outline: none;
  cursor: pointer;
  border-radius: 50%;
  position: absolute;
  right: 0px;
  color:#fff ;
  background-color:transparent;
  pointer-events: painted;  
}
.btn-search:focus ~ .input-search{
  width: 300px;
  border-radius: 0px;
  background-color: #1E90FF;
  border-bottom:1px solid rgba(255,255,255,.5);
  transition: all 500ms cubic-bezier(0, 0.110, 0.35, 2);
}
.input-search:focus{
  width: 300px;
  border-radius: 0px;
  background-color: #1E90FF;
  border-bottom:1px solid rgba(255,255,255,.5);
  transition: all 500ms cubic-bezier(0, 0.110, 0.35, 2);
}
</style>
<script>
$(document).ready(function(){
  $("#search").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
 
</script>
<body >

  <main id="main" class="main">
  <div>

        <div class="pagetitle">
          <h3 style="text-align:center;color:#012970;" >Liste des reclamation</h3>
        </div><!-- End Page Title -->

  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="data_table">

        {% for message in app.flashes('Success') %}
            <div class="alert alert-success" style="text-align:center;">
                {{ message }}
            </div>
        {% endfor %}
        <div class="sidebar-search">
        <div class="input-group custom-search-form">
        <div class="search-box">
    <button class="btn-search"><i class="fas fa-search"></i></button>
    <input type="text" name="search" id="search" class="input-search" placeholder="Type to Search...">
    
  </div>    
</div>

        </div>

          <table class="table table-striped table-bordered">
            <thead class="table-primary">
                <tr>
                   <th scope="col">Id</th>
        <th scope="col">Type</th>
        <th scope="col">Nom Client</th>
        <th scope="col">Email</th>
                <th scope="col">Date Reclamation</th>
        <th scope="col">Description</th>
        <th scope="col">Etat</th>
        <th scope="col">Status</th>
        <th scope="col">Actions</th>

                </tr>
            </thead>
            <tbody id="myTable">
                {% for reclamation in pagination %}
                      <tr>
                       <td scope="row">{{reclamation.id}}</td>
                              <td scope="row">{{reclamation.type}}</td>
                              <td>{{reclamation.nom}}</td>
                              <td>{{reclamation.emailreclamation}}</td>
                              <td>{{reclamation.datereclamation.format('Y-m-d H:i:s')}}</td>
                              <td>{{reclamation.description}}</td>
                              <td>
                              {% if reclamation.status == 0 %}
                               <script src="{{asset('/js/script.js')}}"></script>
                                <a id="myButton" type="button" class="btn btn-outline-success" 
                                    onclick="delayAction(event,this)" href="{{ path('app_accepter_reclamation',{id : reclamation.id}) }}">Accepter</a>
                                <a id="myButton" type="button" class="btn btn-outline-danger" 
                                    onclick="delayAction(event,this)" href="{{ path('app_refuser_reclamation',{id : reclamation.id}) }}">Refuser</a>
                                    
                                {% elseif reclamation.status == 1 %}
                                <a id="myButton" type="button" class="btn btn-outline-danger" 
                                    onclick="delayAction(event,this)" href="{{ path('app_refuser_reclamation',{id : reclamation.id}) }}">Refuser</a>
                                {% else %}
                                <a id="myButton" type="button" class="btn btn-outline-success" 
                                    onclick="delayAction(event,this)" href="{{ path('app_accepter_reclamation',{id : reclamation.id}) }}">Accepter</a>

                              {% endif %}
                              </td> <td>
                              {% if reclamation.status == 0 %}
                                <button type="button" class="btn btn-sm btn-success">En cours</button>
                                {% elseif reclamation.status ==1 %}
                                <button type="button" class="btn btn-sm btn-success">Accepter</button>
                                {% else %}
                                <button type="button" class="btn btn-sm btn-danger">Refuser</button>
                              {% endif %}
                              </td>
                              <td>
                                   <a href="{{path('ajouterback_reponse',{'id':reclamation.id})}}" class="btn btn-sm btn-primary">
                          <i class="bi bi-plus"></i>
                      </a>
                      <a href="{{path('updateback_reclamation',{'id':reclamation.id})}}" class="btn btn-sm btn-warning">
                          <i class="fa fa-edit"></i>
                      </a>
                                  <a href="{{ path('deleteback_reclamation',{id : reclamation.id}) }}" class="btn btn-sm btn-danger" 
                                  onclick="confirmAction(event)">
                                      <i class="fa fa-trash"></i>
                                  </a>
                                  <a href="{{ path('afficheback_reponse',{id : reclamation.id}) }}" class="btn btn-sm btn-primary">
                          <i class="fa fa-eye"></i>
                      </a>
                                  <script>
                                    function confirmAction(event) {
                                      // display a confirmation dialog box
                                      if (!confirm('Are you sure you want to delete this claim ?')) {
                                        event.preventDefault(); // cancel the default navigation behavior
                                      }
                                    }
                                  </script>
                              </td>
                              

                              
                      </tr>
                  {% endfor %}   
            </tbody>
            <tfoot>
                <tr>
                    <th scope="col">Id</th>
        <th scope="col">Type</th>
        <th scope="col">Nom Client</th>
        <th scope="col">Email</th>
        <th scope="col">Date Reclamation</th>
        <th scope="col">Description</th>
        <th scope="col">Etat</th>
        <th scope="col">Status</th>
        <th scope="col">Actions</th>
                </tr>
            </tfoot>
        </table>

        </div>
      </div>
    </div>
  </div>
</div>

  </main>

  

</body>
<div class="d-flex justify-content-center">
        {% do pagination.SetPageRange(3) %}
        {{ knp_pagination_render(pagination, "pagination.html.twig") }}
    </div>

{% endblock %}